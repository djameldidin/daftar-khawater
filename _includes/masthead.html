<header class="site-header">
  <div class="masthead__inner-wrap">
    <button class="nav-toggle" aria-label="Toggle Menu">
      <i class="fas fa-bars"></i>
    </button>

    <nav class="site-nav">
      <ul class="nav-links">
        {%- for link in site.data.navigation.main -%}
          {%- if link.children -%}
            <li class="dropdown">
              <a href="#" class="dropdown-toggle">{{ link.title }}</a>
              <ul class="dropdown-menu">
                {%- for child in link.children -%}
                  <li><a href="{{ child.url | relative_url }}">{{ child.title }}</a></li>
                {%- endfor -%}
              </ul>
            </li>
          {%- else -%}
            <li><a href="{{ link.url | relative_url }}">{{ link.title }}</a></li>
          {%- endif -%}
        {%- endfor -%}
      </ul>
    </nav>
  </div>
</header>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const navToggle = document.querySelector('.nav-toggle');
    const navLinks = document.querySelector('.nav-links');

    // فتح وإغلاق قائمة الهاتف
    if (navToggle) {
      navToggle.addEventListener('click', function() {
        navLinks.classList.toggle('nav-open');
      });
    }

    // تفعيل القوائم الفرعية بالنقر (للهاتف)
    document.querySelectorAll('.dropdown-toggle').forEach(item => {
      item.addEventListener('click', function(event) {
        if (window.innerWidth <= 1024) {
          event.preventDefault();
          this.parentElement.classList.toggle('open');
        }
      });
    });

    // إغلاق قائمة الهاتف عند النقر على أي رابط
    document.querySelectorAll('.nav-links a:not(.dropdown-toggle)').forEach(link => {
      link.addEventListener('click', function() {
        if (window.innerWidth <= 1024) {
          navLinks.classList.remove('nav-open');
        }
      });
    });
  });
</script>