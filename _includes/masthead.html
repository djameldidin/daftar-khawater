<header class="site-header">
  <div class="masthead__inner-wrap">
    <button class="nav-toggle" aria-label="Toggle Menu">
      <i class="fas fa-bars"></i>
    </button>

    <nav class="site-nav">
      <ul class="nav-links">
        {%- for link in site.data.navigation.main -%}
          {%- if link.children -%}
            <li class="dropdown">
              <a href="{{ link.url | relative_url }}" class="dropdown-main-link">
                {{ link.title }}
              </a>
              <button class="dropdown-toggle" aria-label="فتح القائمة الفرعية">
                ▼
              </button>
              <ul class="dropdown-menu">
                {%- for child in link.children -%}
                  <li><a href="{{ child.url | relative_url }}">{{ child.title }}</a></li>
                {%- endfor -%}
              </ul>
            </li>
          {%- else -%}
            <li><a href="{{ link.url | relative_url }}">{{ link.title }}</a></li>
          {%- endif -%}
        {%- endfor -%}
      </ul>
    </nav>
  </div>
</header>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const navToggle = document.querySelector('.nav-toggle');
    const navLinks = document.querySelector('.nav-links');

    // فتح وإغلاق قائمة الهاتف
    if (navToggle) {
      navToggle.addEventListener('click', function() {
        navLinks.classList.toggle('nav-open');
      });
    }

    // فتح القوائم الفرعية بزر منفصل
    document.querySelectorAll('.dropdown-toggle').forEach(btn => {
      btn.addEventListener('click', function(event) {
        event.preventDefault();
        this.parentElement.classList.toggle('open');
      });
    });

    // إغلاق القائمة عند النقر على رابط في الموبايل
    document.querySelectorAll('.nav-links a:not(.dropdown-main-link)').forEach(link => {
      link.addEventListener('click', function() {
        if (window.innerWidth <= 1024) {
          navLinks.classList.remove('nav-open');
        }
      });
    });
  });
</script>
