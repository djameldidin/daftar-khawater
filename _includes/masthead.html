<header class="site-header">
  <div class="masthead__inner-wrap">
    <nav id="site-nav" class="greedy-nav">
      <button class="masthead__menu-toggle">
        <i class="fas fa-bars"></i>
      </button>

      <ul class="visible-links">
        {%- for link in site.data.navigation.main -%}
          {%- if link.children -%}
            <li class="dropdown">
              <a href="#" class="dropdown-toggle">{{ link.title }}</a>
              <ul class="dropdown-menu">
                {%- for child in link.children -%}
                  <li><a href="{{ child.url | relative_url }}">{{ child.title }}</a></li>
                {%- endfor -%}
              </ul>
            </li>
          {%- else -%}
            <li><a href="{{ link.url | relative_url }}">{{ link.title }}</a></li>
          {%- endif -%}
        {%- endfor -%}
      </ul>
    </nav>
  </div>
</header>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const toggleBtn = document.querySelector('.masthead__menu-toggle');
    const nav = document.querySelector('.greedy-nav');

    // تفعيل زر القائمة في الهاتف
    if (toggleBtn) {
      toggleBtn.addEventListener('click', () => {
        nav.classList.toggle('nav-open');
      });
    }

    // تفعيل القوائم المنسدلة عند النقر في الهاتف
    document.querySelectorAll('.dropdown-toggle').forEach(item => {
      item.addEventListener('click', event => {
        if (window.innerWidth <= 960) {
          event.preventDefault();
          item.parentElement.classList.toggle('open');
        }
      });
    });
  });
</script>